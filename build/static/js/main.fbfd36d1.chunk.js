(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{14:function(e,a,t){},15:function(e,a,t){},18:function(e,a,t){},19:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(7),o=t.n(r),c=Object(n.createContext)(),s=function(){var e=Object(n.useContext)(c),a=e.getIsRevealMode();return l.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0 ml-auto ".concat(a?"active":""),onClick:function(){e.setIsRevealMode(!a)}},l.a.createElement("i",{className:"fa fa-eye"})," Reveal All Cells")},i=function(){return l.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark"},l.a.createElement("a",{className:"navbar-brand",href:"/#"},l.a.createElement("i",{className:"fa fa-bomb"})," ReactJS Minesweeper"),l.a.createElement("button",{className:"navbar-toggler collapsed",type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"navbar-collapse collapse",id:"navbarCollapse"},l.a.createElement(s,null)))},m=t(2),u=t(5),g=t(1),d=(t(14),{header:"Mazal Tov!",content:l.a.createElement("span",null,"You did it!",l.a.createElement("i",{className:"fa fa-trophy ml-1"})),type:"success",timeout:null}),f={header:"Oy Vey!",content:l.a.createElement("span",null,"It's a mine",l.a.createElement("i",{className:"fa fa-bomb ml-1"})),type:"danger",timeout:null},p={header:"Out Of Flags!",content:l.a.createElement("span",null,"Try to remove a flag before adding a new one",l.a.createElement("i",{className:"fa fa-flag ml-1"})),type:"secondary",timeout:5e3},b=function(e){var a=e.cellRow,t=e.cellCol,r=e.isMine,o=e.mineNeighbours,s=e.isRevealed,i=e.isFlagged,m=e.isLostTrigger,u=e.missedMark,g=e.clickHandler,d=e.touchHandler,f=Object(n.useContext)(c).getIsRevealMode(),p=null;return l.a.createElement("div",{className:"game-cell alert alert-".concat(m?"danger":u?"secondary":"primary"),style:{width:30,height:30}},l.a.createElement("span",null,r?l.a.createElement("i",{className:"fa fa-bomb fa-md"}):i?l.a.createElement("i",{className:"fa fa-times",style:{color:"#ffb000"}}):o>0?l.a.createElement(n.Fragment,null,o):null),l.a.createElement("button",{className:"btn btn-warning game-btn",onClick:function(e){return g(e,a,t)},onTouchStart:function(){return function(e,a){p=setTimeout((function(){d(!0,e,a)}),500)}(a,t)},onTouchEnd:function(){clearTimeout(p)},style:{opacity:s?0:f?.5:1,cursor:s?"auto":"pointer",display:"block"}},i?l.a.createElement("i",{className:"fa fa-flag"}):null))},v=(t(15),function(e,a,t){var n=[];return function(e,a,t,n){for(var l=0;l<a;l++){e.push([]);for(var r=0;r<t;r++)e[l].push({cellRow:l,cellCol:r,isRevealed:!1,isMine:!1,isFlagged:!1,isLostTrigger:!1,missedMark:!1,mineNeighbours:0})}}(n,e,a),function(e,a,t,n){for(var l=function(e){var n=function(n,l){if(e[n][l].isMine)return-1;for(var r=0,o=-1;o<=1;o++){var c=n+o;if(!(c<0||c>=a))for(var s=-1;s<=1;s++){var i=l+s;i<0||i>=t||e[c][i].isMine&&r++}}return r};e.map((function(a,t){return a.map((function(a,l){return e[t][l]=Object(m.a)({},e[t][l],{mineNeighbours:n(t,l)})}))}))},r=0;r<n;){var o=Math.floor(Math.random()*a),c=Math.floor(Math.random()*t),s=e[o][c];s.isMine||(e[o][c]=Object(m.a)({},s,{isMine:!0}),r++),l(e)}}(n,e,a,t),n}),E=t(8),N=function(e){var a=e.remainingFlags;return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"bs-component"},l.a.createElement("div",{className:"alert"},l.a.createElement("h3",{className:"mr-1"},l.a.createElement("strong",null,a),l.a.createElement("i",{className:"fa fa-flag ml-1"})))))};N.prototype={remainingFlags:t.n(E).a.number};var T=N,O=function(e){var a=e.alert;return null!==a&&l.a.createElement("div",{className:"bs-component"},l.a.createElement("div",{className:"alert alert-".concat(a.type)},l.a.createElement("strong",null,a.header)," ",a.content))},M=function(){var e=Object(n.useContext)(c),a=e.getTotalRows(),t=e.getTotalCols(),r=e.getTotalMines(),o=e.getBoardTimestamp(),s=function(){return JSON.parse(localStorage.getItem("board"))},i=Object(n.useState)(s),E=Object(g.a)(i,2),N=E[0],M=E[1],S=Object(n.useState)("true"===localStorage.getItem("gameFreeze")||!1),y=Object(g.a)(S,2),h=y[0],R=y[1],I=Object(n.useState)(parseInt(localStorage.getItem("remainingFlags"))||r),j=Object(g.a)(I,2),C=j[0],w=j[1],F=Object(n.useState)(parseInt(localStorage.getItem("numberOfCorrectFlags"))||0),k=Object(g.a)(F,2),x=k[0],_=k[1],L=function(e){!function(e){localStorage.setItem("gameFreeze",e)}(e),R(e)},A=function(e){!function(e){localStorage.setItem("remainingFlags",e)}(e),w(e)},B=function(e){!function(e){localStorage.setItem("numberOfCorrectFlags",e)}(e),_(e)},D=Object(n.useState)(null),H=Object(g.a)(D,2),J=H[0],P=H[1],z=Object(n.useCallback)((function(e){P(e),e&&e.timeout>0&&setTimeout((function(){return P(null)}),e.timeout)}),[]);Object(n.useEffect)((function(){s()||(M(v(a,t,r)),B(0),A(r),L(!1),P(null))}),[a,t,r,o]),Object(n.useEffect)((function(){localStorage.setItem("board",JSON.stringify(N))}),[N]);var V=Object(n.useCallback)((function(e,a){e===a?(z(d),L(!0)):(z(null),L(!1))}),[z]);Object(n.useEffect)((function(){return V(x,r)}),[x,r,z,V]);var W=function(e,a,t){G(e.shiftKey,a,t)},G=function(e,a,t){var n=N[a][t];if(!h&&!n.isRevealed)if(e)K(a,t);else if(!n.isFlagged)return n.isMine?(z(f),n.isLostTrigger=!0,M(Object(u.a)(N).map((function(e){return e.map((function(e){return e.isMine&&!e.isFlagged||e.isFlagged&&!e.isMine?Object(m.a)({},e,{isRevealed:!0,missedMark:!0}):e}))}))),void L(!0)):void(n.isFlagged||Y(a,t))},K=function(e,a){var t=Object(u.a)(N),n=t[e][a];if(n.isFlagged)!function(e,a,t){A(e+1),a&&B(t-1)}(C,n.isMine,x);else{if(!(C>0))return void z(p);!function(e,a,t){A(e-1),n.isMine&&B(t+1)}(C,n.isMine,x)}t[e][a].isFlagged=!t[e][a].isFlagged,M(t)},Y=function(e,a){var t=Object(u.a)(N);t=q(t,e,a),M(t)},q=function(e,a,t){var n=e[a][t];return n.isRevealed=!0,0===n.mineNeighbours&&(e=Q(e,n)),e},Q=function(e,n){for(var l=n.cellRow,r=n.cellCol,o=-1;o<=1;o++){var c=l+o;if(!(c<0||c>=a))for(var s=-1;s<=1;s++){var i=r+s;if(!(i<0||i>=t)){var m=e[c][i];m.isRevealed||m.isMine||m.isFlagged||q(e,m.cellRow,m.cellCol)}}}return e};return l.a.createElement(n.Fragment,null,l.a.createElement(O,{alert:J}),l.a.createElement("div",{className:"container"},l.a.createElement(T,{remainingFlags:C})),l.a.createElement("div",{className:"game-board",style:{gridTemplateColumns:"repeat(".concat(t,", ").concat(30,"px)")}},N&&N.map((function(e,a){return e.map((function(e,t){return l.a.createElement("div",{key:"".concat(a,",").concat(t)},l.a.createElement(b,{cellRow:a,cellCol:t,isMine:e.isMine,mineNeighbours:e.mineNeighbours,isRevealed:e.isRevealed,isFlagged:e.isFlagged,isLostTrigger:e.isLostTrigger,missedMark:e.missedMark,clickHandler:W,touchHandler:G}))}))}))))},S=function(e,a){switch(a.type){case"SET_TOTAL_ROWS":return Object(m.a)({},e,{totalRows:a.payload});case"SET_TOTAL_COLS":return Object(m.a)({},e,{totalCols:a.payload});case"SET_TOTAL_MINES":return Object(m.a)({},e,{totalMines:a.payload});case"SET_BOARD_TIMESTAMP":return Object(m.a)({},e,{boardTimestamp:a.payload});case"SET_IS_REVEAL_MODE":return Object(m.a)({},e,{isRevealMode:a.payload});default:return}},y=function(e){var a={totalRows:9,totalCols:9,totalMines:10,boardTimestamp:(new Date).getTime(),isRevealMode:!1},t=Object(n.useReducer)(S,a),r=Object(g.a)(t,2),o=r[0],s=r[1];return l.a.createElement(c.Provider,{value:{getTotalRows:function(){var e=parseInt(localStorage.getItem("totalRows"));return e||o.totalRows},getTotalCols:function(){var e=parseInt(localStorage.getItem("totalCols"));return e||o.totalCols},getTotalMines:function(){var e=parseInt(localStorage.getItem("totalMines"));return e||o.totalMines},getBoardTimestamp:function(){var e=localStorage.getItem("boardTimestamp");return e||o.boardTimestamp},getIsRevealMode:function(){var e="true"===localStorage.getItem("isRevealMode");return e||o.isRevealMode},setTotalRows:function(e){localStorage.setItem("totalRows",e),s({type:"SET_TOTAL_ROWS",payload:e})},setTotalCols:function(e){localStorage.setItem("totalCols",e),s({type:"SET_TOTAL_COLS",payload:e})},setTotalMines:function(e){localStorage.setItem("totalMines",e),s({type:"SET_TOTAL_MINES",payload:e})},setBoardTimestamp:function(e){localStorage.setItem("boardTimestamp",e),s({type:"SET_BOARD_TIMESTAMP",payload:e})},setIsRevealMode:function(e){localStorage.setItem("isRevealMode",e),s({type:"SET_IS_REVEAL_MODE",payload:e})}}},e.children)},h=(t(18),function(){var e=Object(n.useContext)(c),a=Object(n.useState)(e.getTotalRows()),t=Object(g.a)(a,2),r=t[0],o=t[1],s=Object(n.useState)(e.getTotalCols()),i=Object(g.a)(s,2),m=i[0],u=i[1],d=Object(n.useState)(e.getTotalMines()),f=Object(g.a)(d,2),p=f[0],b=f[1];return l.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.setTotalRows(parseInt(r)),e.setTotalCols(parseInt(m)),e.setTotalMines(parseInt(p)),localStorage.removeItem("board"),e.setBoardTimestamp((new Date).getTime())}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8 col-centered mx-auto"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"input-group mb-1"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"fa fa-align-justify","aria-hidden":"true"}))),l.a.createElement("input",{id:"totalRowsInput",className:"form-control",type:"number",min:"1",max:"300",value:r,onChange:function(e){return o(e.target.value)},"aria-label":"Rows"}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"input-group mb-1"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"fa fa-align-justify fa-rotate-90","aria-hidden":"true"}))),l.a.createElement("input",{id:"totalColsInput",className:"form-control",type:"number",min:"1",max:"300",value:m,onChange:function(e){return u(e.target.value)},"aria-label":"Cols"}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"input-group mb-1"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"fa fa-bomb","aria-hidden":"true"}))),l.a.createElement("input",{id:"totalMinesInput",className:"form-control",type:"number",min:"1",max:r*m,value:p,onChange:function(e){return b(e.target.value)},"aria-label":"Mines"}))),l.a.createElement("div",{className:"col-md-3 mb-1"},l.a.createElement("button",{className:"btn btn-success btn-block",type:"submit"},"New Game"))))))}),R=function(){return l.a.createElement("div",{className:"continer text-center mb-3"},l.a.createElement("h4",{className:"text-light"},"How To Play"),l.a.createElement("span",{className:"text-light mr-2 d-none d-sm-inline"},"Click to reveal a cell."),l.a.createElement("span",{className:"text-light mr-2 d-block d-sm-none"},"Touch to reveal a cell."),l.a.createElement("span",{className:"text-light mr-2 d-none d-sm-inline"},"Shift + Click to set a flag."),l.a.createElement("span",{className:"text-light mr-2 d-block d-sm-none"},"Touch Longer to set a flag."),l.a.createElement("span",{className:"text-light"},"Flag all mines for the win!"))},I=function(){return l.a.createElement(y,null,l.a.createElement("div",{className:"minesweeperApp"},l.a.createElement(i,null),l.a.createElement("div",{className:"container mt-3"},l.a.createElement(h,null)),l.a.createElement("div",{className:"container jumbotron text-center mt-3 py-4 dark-background"},l.a.createElement("div",{className:"container game-board-container"},l.a.createElement(M,null))),l.a.createElement(R,null)))};o.a.render(l.a.createElement(I,null),document.getElementById("root"))},9:function(e,a,t){e.exports=t(19)}},[[9,1,2]]]);
//# sourceMappingURL=main.fbfd36d1.chunk.js.map