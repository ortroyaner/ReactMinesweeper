(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{14:function(e,a,t){},15:function(e,a,t){},18:function(e,a,t){},19:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(7),s=t.n(r),c=Object(n.createContext)(),o=function(){var e=Object(n.useContext)(c),a=e.isRevealMode;return l.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0 ml-auto ".concat(a?"active":""),onClick:function(){e.setIsRevealMode(!a)}},l.a.createElement("i",{className:"fa fa-eye"})," Reveal All Cells")},i=function(){return l.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark"},l.a.createElement("a",{className:"navbar-brand",href:"/#"},l.a.createElement("i",{className:"fa fa-bomb"})," ReactJS Minesweeper"),l.a.createElement("button",{className:"navbar-toggler collapsed",type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"navbar-collapse collapse",id:"navbarCollapse"},l.a.createElement(o,null)))},m=t(2),u=t(5),d=t(1),p=(t(14),{header:"Mazal Tov!",content:l.a.createElement("span",null,"You did it!",l.a.createElement("i",{className:"fa fa-trophy ml-1"})),type:"success",timeout:null}),f={header:"Oy Vey!",content:l.a.createElement("span",null,"It's a mine",l.a.createElement("i",{className:"fa fa-bomb ml-1"})),type:"danger",timeout:null},b={header:"Out Of Flags!",content:l.a.createElement("span",null,"Try to remove a flag before adding a new one",l.a.createElement("i",{className:"fa fa-flag ml-1"})),type:"secondary",timeout:5e3},g=function(e){var a=e.cellRow,t=e.cellCol,r=e.isMine,s=e.mineNeighbours,o=e.isRevealed,i=e.isFlagged,m=e.isLostTrigger,u=e.missedMark,d=e.clickHandler,p=e.touchHandler,f=Object(n.useContext)(c).isRevealMode,b=null;return l.a.createElement("div",{className:"game-cell alert alert-".concat(m?"danger":u?"secondary":"primary"),style:{width:30,height:30}},l.a.createElement("span",null,r?l.a.createElement("i",{className:"fa fa-bomb fa-md"}):i?l.a.createElement("i",{className:"fa fa-times",style:{color:"#ffb000"}}):s>0?l.a.createElement(n.Fragment,null,s):null),l.a.createElement("button",{className:"btn btn-warning game-btn",onClick:function(e){return d(e,a,t)},onTouchStart:function(){return function(e,a){b=setTimeout((function(){p(!0,e,a)}),500)}(a,t)},onTouchEnd:function(){clearTimeout(b)},style:{opacity:o?0:f?.5:1,cursor:o?"auto":"pointer",display:"block"}},i?l.a.createElement("i",{className:"fa fa-flag"}):null))},v=(t(15),t(8)),E=function(e){var a=e.remainingFlags;return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"bs-component"},l.a.createElement("div",{className:"alert"},l.a.createElement("h3",{className:"mr-1"},l.a.createElement("strong",null,a),l.a.createElement("i",{className:"fa fa-flag ml-1"})))))};E.prototype={remainingFlags:t.n(v).a.number};var N=E,T=function(e){var a=e.alert;return null!==a&&l.a.createElement("div",{className:"bs-component"},l.a.createElement("div",{className:"alert alert-".concat(a.type)},l.a.createElement("strong",null,a.header)," ",a.content))},O=function(){var e=Object(n.useContext)(c),a=e.totalRows,t=e.totalCols,r=e.totalMines,s=e.boardTimestamp,o=Object(n.useState)([]),i=Object(d.a)(o,2),v=i[0],E=i[1],O=Object(n.useState)(!1),M=Object(d.a)(O,2),y=M[0],h=M[1],R=Object(n.useState)(r),j=Object(d.a)(R,2),C=j[0],S=j[1],w=Object(n.useState)(0),_=Object(d.a)(w,2),F=_[0],k=_[1];Object(n.useEffect)((function(){E(function(e,a,t){for(var n=[],l=0;l<e;l++){n.push([]);for(var r=0;r<a;r++)n[l].push({cellRow:l,cellCol:r,isRevealed:!1,isMine:!1,isFlagged:!1,isLostTrigger:!1,missedMark:!1,mineNeighbours:0})}for(var s=0,c=function(){var t=Math.floor(Math.random()*e),l=Math.floor(Math.random()*a),r=n[t][l];r.isMine||(n[t][l]=Object(m.a)({},r,{isMine:!0}),s++);var c=function(t,l){if(n[t][l].isMine)return-1;for(var r=0,s=-1;s<=1;s++){var c=t+s;if(!(c<0||c>=e))for(var o=-1;o<=1;o++){var i=l+o;i<0||i>=a||n[c][i].isMine&&r++}}return r};n.map((function(e,a){return e.map((function(e,t){return n[a][t]=Object(m.a)({},n[a][t],{mineNeighbours:c(a,t)})}))}))};s<t;)c();return n}(a,t,r)),S(r),k(0),h(!1),P(null)}),[a,t,r,s]),Object(n.useEffect)((function(){F===r&&(V(p),h(!0))}),[F,r]);var x=function(e,a,t){I(e.shiftKey,a,t)},I=function(e,a,t){var n=v[a][t];if(!y&&!n.isRevealed)if(e)L(a,t);else if(!n.isFlagged)return n.isMine?(V(f),n.isLostTrigger=!0,E(Object(u.a)(v).map((function(e){return e.map((function(e){return e.isMine&&!e.isFlagged||e.isFlagged&&!e.isMine?Object(m.a)({},e,{isRevealed:!0,missedMark:!0}):e}))}))),void h(!0)):void(n.isFlagged||A(a,t))},L=function(e,a){var t=Object(u.a)(v),n=t[e][a];if(n.isFlagged)S(C+1),n.isMine&&k(F-1);else{if(!(C>0))return void V(b);S(C-1),n.isMine&&k(F+1)}t[e][a].isFlagged=!t[e][a].isFlagged,E(t)},A=function(e,a){var t=Object(u.a)(v),n=t[e][a];n.isRevealed=!0,0===n.mineNeighbours&&(t=D(t,n)),E(t)},D=function(e,n){for(var l=n.cellRow,r=n.cellCol,s=-1;s<=1;s++){var c=l+s;if(!(c<0||c>=a))for(var o=-1;o<=1;o++){var i=r+o;if(!(i<0||i>=t)){var m=e[c][i];m.isRevealed||m.isMine||m.isFlagged||A(m.cellRow,m.cellCol)}}}return e},B=Object(n.useState)(null),H=Object(d.a)(B,2),J=H[0],P=H[1],V=function(e){var a=e.header,t=e.content,n=e.type,l=e.timeout;P({header:a,content:t,type:n}),l>0&&setTimeout((function(){return P(null)}),l)};return l.a.createElement(n.Fragment,null,l.a.createElement(T,{alert:J}),l.a.createElement("div",{className:"container"},l.a.createElement(N,{remainingFlags:C})),l.a.createElement("div",{className:"game-board",style:{gridTemplateColumns:"repeat(".concat(t,", ").concat(30,"px)")}},v.map((function(e,a){return e.map((function(e,t){return l.a.createElement("div",{key:"".concat(a,",").concat(t)},l.a.createElement(g,{cellRow:a,cellCol:t,isMine:e.isMine,mineNeighbours:e.mineNeighbours,isRevealed:e.isRevealed,isFlagged:e.isFlagged,isLostTrigger:e.isLostTrigger,missedMark:e.missedMark,clickHandler:x,touchHandler:I}))}))}))))},M=function(e,a){switch(a.type){case"SET_TOTAL_ROWS":return Object(m.a)({},e,{totalRows:a.payload});case"SET_TOTAL_COLS":return Object(m.a)({},e,{totalCols:a.payload});case"SET_TOTAL_MINES":return Object(m.a)({},e,{totalMines:a.payload});case"SET_BOARD_TIMESTAMP":return Object(m.a)({},e,{boardTimestamp:a.payload});case"SET_IS_REVEAL_MODE":return Object(m.a)({},e,{isRevealMode:a.payload});default:return}},y=function(e){var a={totalRows:9,totalCols:9,totalMines:10,boardTimestamp:(new Date).getTime(),isRevealMode:!1},t=Object(n.useReducer)(M,a),r=Object(d.a)(t,2),s=r[0],o=r[1];return l.a.createElement(c.Provider,{value:{totalRows:s.totalRows,totalCols:s.totalCols,totalMines:s.totalMines,boardTimestamp:s.boardTimestamp,isRevealMode:s.isRevealMode,setTotalRows:function(e){return o({type:"SET_TOTAL_ROWS",payload:e})},setTotalCols:function(e){return o({type:"SET_TOTAL_COLS",payload:e})},setTotalMines:function(e){return o({type:"SET_TOTAL_MINES",payload:e})},setBoardTimestamp:function(e){return o({type:"SET_BOARD_TIMESTAMP",payload:e})},setIsRevealMode:function(e){return o({type:"SET_IS_REVEAL_MODE",payload:e})}}},e.children)},h=(t(18),function(){var e=Object(n.useContext)(c),a=Object(n.useState)(e.totalRows),t=Object(d.a)(a,2),r=t[0],s=t[1],o=Object(n.useState)(e.totalCols),i=Object(d.a)(o,2),m=i[0],u=i[1],p=Object(n.useState)(e.totalMines),f=Object(d.a)(p,2),b=f[0],g=f[1];return l.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.setTotalRows(parseInt(r)),e.setTotalCols(parseInt(m)),e.setTotalMines(parseInt(b)),e.setBoardTimestamp((new Date).getTime())}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8 col-centered mx-auto"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"input-group mb-1"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"fa fa-align-justify","aria-hidden":"true"}))),l.a.createElement("input",{id:"totalRowsInput",className:"form-control",type:"number",min:"1",max:"300",value:r,onChange:function(e){return s(e.target.value)},"aria-label":"Rows"}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"input-group mb-1"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"fa fa-align-justify fa-rotate-90","aria-hidden":"true"}))),l.a.createElement("input",{id:"totalColsInput",className:"form-control",type:"number",min:"1",max:"300",value:m,onChange:function(e){return u(e.target.value)},"aria-label":"Cols"}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"input-group mb-1"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"fa fa-bomb","aria-hidden":"true"}))),l.a.createElement("input",{id:"totalMinesInput",className:"form-control",type:"number",min:"1",max:r*m,value:b,onChange:function(e){return g(e.target.value)},"aria-label":"Mines"}))),l.a.createElement("div",{className:"col-md-3 mb-1"},l.a.createElement("button",{className:"btn btn-success btn-block",type:"submit"},"New Game"))))))}),R=function(){return l.a.createElement(y,null,l.a.createElement("div",{className:"minesweeperApp"},l.a.createElement(i,null),l.a.createElement("div",{className:"container mt-3"},l.a.createElement(h,null)),l.a.createElement("div",{className:"container jumbotron text-center mt-3 py-4 dark-background"},l.a.createElement("div",{className:"container game-board-container"},l.a.createElement(O,null)))))};s.a.render(l.a.createElement(R,null),document.getElementById("root"))},9:function(e,a,t){e.exports=t(19)}},[[9,1,2]]]);
//# sourceMappingURL=main.4ed79af3.chunk.js.map