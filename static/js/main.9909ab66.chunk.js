(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{13:function(e,a,t){e.exports=t(23)},18:function(e,a,t){},19:function(e,a,t){},22:function(e,a,t){},23:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(7),o=t.n(r),c=t(8),s=t(9),i=t(12),m=t(11),u=Object(n.createContext)(),d=function(){var e=Object(n.useContext)(u),a=e.getIsRevealMode();return l.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0 ml-auto ".concat(a?"active":""),onClick:function(){e.setIsRevealMode(!a)}},l.a.createElement("i",{className:"fa fa-eye"})," Reveal All Cells")},g=function(){return l.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark"},l.a.createElement("a",{className:"navbar-brand",onClick:function(e){return e.preventDefault()},href:"/#"},l.a.createElement("i",{className:"fa fa-bomb"})," ReactJS Minesweeper"),l.a.createElement("button",{className:"navbar-toggler collapsed",type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"navbar-collapse collapse",id:"navbarCollapse"},l.a.createElement(d,null)))},f=t(2),p=t(5),b=t(1),v=(t(18),{header:"Well Done!",content:l.a.createElement("span",null,"You did it!",l.a.createElement("i",{className:"fa fa-trophy ml-1"})),type:"success",timeout:null}),E={header:"Oy Vey!",content:l.a.createElement("span",null,"It's a mine",l.a.createElement("i",{className:"fa fa-bomb ml-1"})),type:"danger",timeout:null},N={header:"Out Of Flags!",content:l.a.createElement("span",null,"Try to remove a flag before adding a new one",l.a.createElement("i",{className:"fa fa-flag ml-1"})),type:"secondary",timeout:5e3},T=function(e){var a=e.cellRow,t=e.cellCol,r=e.isMine,o=e.mineNeighbours,c=e.isRevealed,s=e.isFlagged,i=e.isLostTrigger,m=e.missedMark,d=e.clickHandler,g=e.touchHandler,f=Object(n.useContext)(u).getIsRevealMode(),p=null;return l.a.createElement("div",{className:"game-cell alert alert-".concat(i?"danger":m?"secondary":"primary"),style:{width:30,height:30}},l.a.createElement("span",null,r?l.a.createElement("i",{className:"fa fa-bomb fa-md"}):s?l.a.createElement("i",{className:"fa fa-times",style:{color:"#ffb000"}}):o>0?l.a.createElement(n.Fragment,null,o):null),l.a.createElement("button",{className:"btn btn-warning game-btn d-block",onClick:function(e){return d(e,a,t)},onTouchStart:function(){return function(e,a){p=setTimeout((function(){g(!0,e,a)}),500)}(a,t)},onTouchEnd:function(){clearTimeout(p)},style:{opacity:c?0:f?.5:1,cursor:c?"auto":"pointer"}},s?l.a.createElement("i",{className:"fa fa-flag"}):null))},O=(t(19),function(e,a,t){var n=[];return function(e,a,t,n){for(var l=0;l<a;l++){e.push([]);for(var r=0;r<t;r++)e[l].push({cellRow:l,cellCol:r,isRevealed:!1,isMine:!1,isFlagged:!1,isLostTrigger:!1,missedMark:!1,mineNeighbours:0})}}(n,e,a),function(e,a,t,n){for(var l=function(e){var n=function(n,l){if(e[n][l].isMine)return-1;for(var r=0,o=-1;o<=1;o++){var c=n+o;if(!(c<0||c>=a))for(var s=-1;s<=1;s++){var i=l+s;i<0||i>=t||e[c][i].isMine&&r++}}return r};e.map((function(a,t){return a.map((function(a,l){return e[t][l]=Object(f.a)({},e[t][l],{mineNeighbours:n(t,l)})}))}))},r=0;r<n;){var o=Math.floor(Math.random()*a),c=Math.floor(Math.random()*t),s=e[o][c];s.isMine||(e[o][c]=Object(f.a)({},s,{isMine:!0}),r++),l(e)}}(n,e,a,t),n}),h=t(10),S=function(e){var a=e.remainingFlags;return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"bs-component"},l.a.createElement("div",{className:"alert"},l.a.createElement("h3",{className:"mr-1"},l.a.createElement("strong",null,a),l.a.createElement("i",{className:"fa fa-flag ml-1"})))))};S.prototype={remainingFlags:t.n(h).a.number};var M=S,y=function(e){var a=e.alert;return null!==a&&l.a.createElement("div",{className:"bs-component"},l.a.createElement("div",{className:"alert alert-".concat(a.type)},l.a.createElement("strong",null,a.header)," ",a.content))},j=function(){var e=Object(n.useContext)(u),a=e.getTotalRows(),t=e.getTotalCols(),r=e.getTotalMines(),o=e.getBoardTimestamp(),c=function(){return JSON.parse(localStorage.getItem("board"))},s=Object(n.useState)(c),i=Object(b.a)(s,2),m=i[0],d=i[1],g=Object(n.useState)("true"===localStorage.getItem("gameFreeze")||!1),h=Object(b.a)(g,2),S=h[0],j=h[1],R=Object(n.useState)(parseInt(localStorage.getItem("remainingFlags"))||r),C=Object(b.a)(R,2),I=C[0],w=C[1],k=Object(n.useState)(parseInt(localStorage.getItem("numberOfCorrectFlags"))||0),F=Object(b.a)(k,2),x=F[0],_=F[1],L=function(e){!function(e){localStorage.setItem("gameFreeze",e)}(e),j(e)},A=function(e){!function(e){localStorage.setItem("remainingFlags",e)}(e),w(e)},D=function(e){!function(e){localStorage.setItem("numberOfCorrectFlags",e)}(e),_(e)},B=Object(n.useState)(null),H=Object(b.a)(B,2),J=H[0],P=H[1],V=Object(n.useCallback)((function(e){P(e),e&&e.timeout>0&&setTimeout((function(){return P(null)}),e.timeout)}),[]);Object(n.useEffect)((function(){c()||(d(O(a,t,r)),D(0),A(r),L(!1),P(null))}),[a,t,r,o]),Object(n.useEffect)((function(){localStorage.setItem("board",JSON.stringify(m))}),[m]);var W=Object(n.useCallback)((function(e,a){e===a?(V(v),L(!0)):(V(null),L(!1))}),[V]);Object(n.useEffect)((function(){return W(x,r)}),[x,r,V,W]);var z=function(e,a,t){G(e.shiftKey,a,t)},G=function(e,a,t){var n=m[a][t];if(!S&&!n.isRevealed)if(e)K(a,t);else if(!n.isFlagged)return n.isMine?(V(E),n.isLostTrigger=!0,d(Object(p.a)(m).map((function(e){return e.map((function(e){return e.isMine&&!e.isFlagged||e.isFlagged&&!e.isMine?Object(f.a)({},e,{isRevealed:!0,missedMark:!0}):e}))}))),void L(!0)):void(n.isFlagged||Y(a,t))},K=function(e,a){var t=Object(p.a)(m),n=t[e][a];if(n.isFlagged)!function(e,a,t){A(e+1),a&&D(t-1)}(I,n.isMine,x);else{if(!(I>0))return void V(N);!function(e,a,t){A(e-1),n.isMine&&D(t+1)}(I,n.isMine,x)}t[e][a].isFlagged=!t[e][a].isFlagged,d(t)},Y=function(e,a){var t=Object(p.a)(m);t=q(t,e,a),d(t)},q=function(e,a,t){var n=e[a][t];return n.isRevealed=!0,0===n.mineNeighbours&&(e=Q(e,n)),e},Q=function(e,n){for(var l=n.cellRow,r=n.cellCol,o=-1;o<=1;o++){var c=l+o;if(!(c<0||c>=a))for(var s=-1;s<=1;s++){var i=r+s;if(!(i<0||i>=t)){var m=e[c][i];m.isRevealed||m.isMine||m.isFlagged||q(e,m.cellRow,m.cellCol)}}}return e};return l.a.createElement(n.Fragment,null,l.a.createElement(y,{alert:J}),l.a.createElement("div",{className:"container"},l.a.createElement(M,{remainingFlags:I})),l.a.createElement("div",{className:"game-board",style:{gridTemplateColumns:"repeat(".concat(t,", ").concat(30,"px)")}},m&&m.map((function(e,a){return e.map((function(e,t){return l.a.createElement("div",{key:"".concat(a,",").concat(t)},l.a.createElement(T,{cellRow:a,cellCol:t,isMine:e.isMine,mineNeighbours:e.mineNeighbours,isRevealed:e.isRevealed,isFlagged:e.isFlagged,isLostTrigger:e.isLostTrigger,missedMark:e.missedMark,clickHandler:z,touchHandler:G}))}))}))))},R=function(e,a){switch(a.type){case"SET_TOTAL_ROWS":return Object(f.a)({},e,{totalRows:a.payload});case"SET_TOTAL_COLS":return Object(f.a)({},e,{totalCols:a.payload});case"SET_TOTAL_MINES":return Object(f.a)({},e,{totalMines:a.payload});case"SET_BOARD_TIMESTAMP":return Object(f.a)({},e,{boardTimestamp:a.payload});case"SET_IS_REVEAL_MODE":return Object(f.a)({},e,{isRevealMode:a.payload});default:return}},C=function(e){var a={totalRows:9,totalCols:9,totalMines:10,boardTimestamp:(new Date).getTime(),isRevealMode:!1},t=Object(n.useReducer)(R,a),r=Object(b.a)(t,2),o=r[0],c=r[1];return l.a.createElement(u.Provider,{value:{getTotalRows:function(){var e=parseInt(localStorage.getItem("totalRows"));return e||o.totalRows},getTotalCols:function(){var e=parseInt(localStorage.getItem("totalCols"));return e||o.totalCols},getTotalMines:function(){var e=parseInt(localStorage.getItem("totalMines"));return e||o.totalMines},getBoardTimestamp:function(){var e=localStorage.getItem("boardTimestamp");return e||o.boardTimestamp},getIsRevealMode:function(){var e="true"===localStorage.getItem("isRevealMode");return e||o.isRevealMode},setTotalRows:function(e){!function(e){localStorage.setItem("totalRows",e)}(e),c({type:"SET_TOTAL_ROWS",payload:e})},setTotalCols:function(e){!function(e){localStorage.setItem("totalCols",e)}(e),c({type:"SET_TOTAL_COLS",payload:e})},setTotalMines:function(e){!function(e){localStorage.setItem("totalMines",e)}(e),c({type:"SET_TOTAL_MINES",payload:e})},setBoardTimestamp:function(e){!function(e){localStorage.setItem("boardTimestamp",e)}(e),c({type:"SET_BOARD_TIMESTAMP",payload:e})},setIsRevealMode:function(e){!function(e){localStorage.setItem("isRevealMode",e)}(e),c({type:"SET_IS_REVEAL_MODE",payload:e})}}},e.children)},I=(t(22),function(){var e=Object(n.useContext)(u),a=Object(n.useState)(e.getTotalRows()),t=Object(b.a)(a,2),r=t[0],o=t[1],c=Object(n.useState)(e.getTotalCols()),s=Object(b.a)(c,2),i=s[0],m=s[1],d=Object(n.useState)(e.getTotalMines()),g=Object(b.a)(d,2),f=g[0],p=g[1];return l.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.setTotalRows(parseInt(r)),e.setTotalCols(parseInt(i)),e.setTotalMines(parseInt(f)),localStorage.removeItem("board"),e.setBoardTimestamp((new Date).getTime())}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8 col-centered mx-auto"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"input-group mb-1"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"fa fa-align-justify","aria-hidden":"true"}))),l.a.createElement("input",{id:"totalRowsInput",className:"form-control",type:"number",min:"1",max:"300",value:r,onChange:function(e){return o(e.target.value)},"aria-label":"Rows"}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"input-group mb-1"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"fa fa-align-justify fa-rotate-90","aria-hidden":"true"}))),l.a.createElement("input",{id:"totalColsInput",className:"form-control",type:"number",min:"1",max:"300",value:i,onChange:function(e){return m(e.target.value)},"aria-label":"Cols"}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"input-group mb-1"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"fa fa-bomb","aria-hidden":"true"}))),l.a.createElement("input",{id:"totalMinesInput",className:"form-control",type:"number",min:"1",max:r*i,value:f,onChange:function(e){return p(e.target.value)},"aria-label":"Mines"}))),l.a.createElement("div",{className:"col-md-3 mb-1"},l.a.createElement("button",{className:"btn btn-success btn-block",type:"submit"},"New Game"))))))}),w=function(){return l.a.createElement("div",{className:"continer text-center mb-3"},l.a.createElement("h4",{className:"text-light"},"How To Play"),l.a.createElement("span",{className:"text-light mr-2 d-none d-sm-inline"},"Click to reveal a cell."),l.a.createElement("span",{className:"text-light mr-2 d-block d-sm-none"},"Touch to reveal a cell."),l.a.createElement("span",{className:"text-light mr-2 d-none d-sm-inline"},"Shift + Click to set a flag."),l.a.createElement("span",{className:"text-light mr-2 d-block d-sm-none"},"Touch Longer to set a flag."),l.a.createElement("span",{className:"text-light"},"Flag all mines for the win!"))},k=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).state={hasError:!1},n}return Object(s.a)(t,[{key:"componentDidCatch",value:function(e,a){localStorage.clear()}},{key:"render",value:function(){return this.state.hasError?l.a.createElement("div",{className:"container"},l.a.createElement("h1",{className:"text-white"},"Something went wrong.")):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(l.a.Component),F=function(){return l.a.createElement(k,null,l.a.createElement(C,null,l.a.createElement("div",{className:"minesweeperApp"},l.a.createElement(g,null),l.a.createElement("div",{className:"container mt-3"},l.a.createElement(I,null)),l.a.createElement("div",{className:"container jumbotron text-center mt-3 py-4 dark-background"},l.a.createElement("div",{className:"container game-board-container"},l.a.createElement(j,null))),l.a.createElement(w,null))))};o.a.render(l.a.createElement(F,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.9909ab66.chunk.js.map