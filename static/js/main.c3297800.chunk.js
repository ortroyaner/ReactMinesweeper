(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{14:function(e,a,t){},15:function(e,a,t){},18:function(e,a,t){},19:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(7),s=t.n(r),c=Object(n.createContext)(),i=function(){var e=Object(n.useContext)(c),a=e.isRevealMode;return l.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0 ml-auto ".concat(a?"active":""),onClick:function(){e.setIsRevealMode(!a)}},l.a.createElement("i",{className:"fa fa-eye"})," Reveal All Cells")},o=function(){return l.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark"},l.a.createElement("a",{className:"navbar-brand",href:"/#"},l.a.createElement("i",{className:"fa fa-bomb"})," ReactJS Minesweeper"),l.a.createElement("button",{className:"navbar-toggler collapsed",type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"navbar-collapse collapse",id:"navbarCollapse"},l.a.createElement(i,null)))},m=t(2),u=t(5),d=t(1),p=(t(14),function(e){var a=e.cellRow,t=e.cellCol,r=e.isMine,s=e.mineNeighbours,i=e.isRevealed,o=e.isFlagged,m=e.isLostTrigger,u=e.missedMark,d=e.clickHandler,p=Object(n.useContext)(c).isRevealMode;return l.a.createElement("div",{className:"game-cell alert alert-".concat(m?"danger":u?"secondary":"primary"),style:{width:30,height:30}},l.a.createElement("span",null,r?l.a.createElement("i",{className:"fa fa-bomb fa-md"}):o?l.a.createElement("i",{className:"fa fa-times",style:{color:"#ffb000"}}):s>0?l.a.createElement(n.Fragment,null,s):null),l.a.createElement("button",{className:"btn btn-warning game-btn",onClick:function(e){return d(e,a,t)},style:{opacity:i?0:p?.5:1,cursor:i?"auto":"pointer",display:"block"}},o?l.a.createElement("i",{className:"fa fa-flag"}):null))}),f=(t(15),t(8)),b=function(e){var a=e.remainingFlags;return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"bs-component"},l.a.createElement("div",{className:"alert"},l.a.createElement("h3",{className:"mr-1"},l.a.createElement("strong",null,a),l.a.createElement("i",{className:"fa fa-flag ml-1"})))))};b.prototype={remainingFlags:t.n(f).a.number};var g=b,v=function(e){var a=e.alert;return null!==a&&l.a.createElement("div",{className:"bs-component"},l.a.createElement("div",{className:"alert alert-".concat(a.type)},l.a.createElement("strong",null,a.header)," ",a.msg))},E=function(){var e=Object(n.useContext)(c),a=e.totalRows,t=e.totalCols,r=e.totalMines,s=e.boardTimestamp,i=Object(n.useState)([]),o=Object(d.a)(i,2),f=o[0],b=o[1],E=Object(n.useState)(!1),N=Object(d.a)(E,2),O=N[0],M=N[1],T=Object(n.useState)(r),y=Object(d.a)(T,2),R=y[0],j=y[1],h=Object(n.useState)(0),C=Object(d.a)(h,2),w=C[0],S=C[1];Object(n.useEffect)((function(){b(function(e,a,t){for(var n=[],l=0;l<e;l++){n.push([]);for(var r=0;r<a;r++)n[l].push({cellRow:l,cellCol:r,isRevealed:!1,isMine:!1,isFlagged:!1,isLostTrigger:!1,missedMark:!1,mineNeighbours:0})}for(var s=0,c=function(){var t=Math.floor(Math.random()*e),l=Math.floor(Math.random()*a),r=n[t][l];r.isMine||(n[t][l]=Object(m.a)({},r,{isMine:!0}),s++);var c=function(t,l){if(n[t][l].isMine)return-1;for(var r=0,s=-1;s<=1;s++){var c=t+s;if(!(c<0||c>=e))for(var i=-1;i<=1;i++){var o=l+i;o<0||o>=a||n[c][o].isMine&&r++}}return r};n.map((function(e,a){return e.map((function(e,t){return n[a][t]=Object(m.a)({},n[a][t],{mineNeighbours:c(a,t)})}))}))};s<t;)c();return n}(a,t,r)),j(r),S(0),M(!1),D(null)}),[a,t,r,s]),Object(n.useEffect)((function(){w===r&&(B("Well Done!",l.a.createElement("span",null,"You did it!",l.a.createElement("i",{className:"fa fa-trophy ml-1"})),"success"),M(!0))}),[w,r]);var _=function(e,a,t){var n=f[a][t];if(!O&&!n.isRevealed)if(e.shiftKey)F(a,t);else if(!n.isFlagged)return n.isMine?(B("Oy Vey!",l.a.createElement("span",null,"It's a mine",l.a.createElement("i",{className:"fa fa-bomb ml-1"})),"danger"),n.isLostTrigger=!0,b(Object(u.a)(f).map((function(e){return e.map((function(e){return e.isMine&&!e.isFlagged||e.isFlagged&&!e.isMine?Object(m.a)({},e,{isRevealed:!0,missedMark:!0}):e}))}))),void M(!0)):void(n.isFlagged||k(a,t))},F=function(e,a){var t=Object(u.a)(f),n=t[e][a];if(n.isFlagged)j(R+1),n.isMine&&S(w-1);else{if(!(R>0))return void B("Out Of Flags!",l.a.createElement("span",null,"Try to remove a flag before adding a new one",l.a.createElement("i",{className:"fa fa-flag ml-1"})),"secondary",5e3);j(R-1),n.isMine&&S(w+1)}t[e][a].isFlagged=!t[e][a].isFlagged,b(t)},k=function(e,a){var t=Object(u.a)(f),n=t[e][a];n.isRevealed=!0,0===n.mineNeighbours&&(t=x(t,n)),b(t)},x=function(e,n){for(var l=n.cellRow,r=n.cellCol,s=-1;s<=1;s++){var c=l+s;if(!(c<0||c>=a))for(var i=-1;i<=1;i++){var o=r+i;if(!(o<0||o>=t)){var m=e[c][o];m.isRevealed||m.isMine||m.isFlagged||k(m.cellRow,m.cellCol)}}}return e},I=Object(n.useState)(null),L=Object(d.a)(I,2),A=L[0],D=L[1],B=function(e,a,t,n){D({header:e,msg:a,type:t}),n>0&&setTimeout((function(){return D(null)}),n)};return l.a.createElement(n.Fragment,null,l.a.createElement(v,{alert:A}),l.a.createElement("div",{className:"container"},l.a.createElement(g,{remainingFlags:R})),l.a.createElement("div",{className:"game-board",style:{gridTemplateColumns:"repeat(".concat(t,", ").concat(30,"px)")}},f.map((function(e,a){return e.map((function(e,t){return l.a.createElement("div",{key:"".concat(a,",").concat(t)},l.a.createElement(p,{cellRow:a,cellCol:t,isMine:e.isMine,mineNeighbours:e.mineNeighbours,isRevealed:e.isRevealed,isFlagged:e.isFlagged,isLostTrigger:e.isLostTrigger,missedMark:e.missedMark,clickHandler:_}))}))}))))},N=function(e,a){switch(a.type){case"SET_TOTAL_ROWS":return Object(m.a)({},e,{totalRows:a.payload});case"SET_TOTAL_COLS":return Object(m.a)({},e,{totalCols:a.payload});case"SET_TOTAL_MINES":return Object(m.a)({},e,{totalMines:a.payload});case"SET_BOARD_TIMESTAMP":return Object(m.a)({},e,{boardTimestamp:a.payload});case"SET_IS_REVEAL_MODE":return Object(m.a)({},e,{isRevealMode:a.payload});default:return}},O=function(e){var a={totalRows:10,totalCols:10,totalMines:10,boardTimestamp:(new Date).getTime(),isRevealMode:!1},t=Object(n.useReducer)(N,a),r=Object(d.a)(t,2),s=r[0],i=r[1];return l.a.createElement(c.Provider,{value:{totalRows:s.totalRows,totalCols:s.totalCols,totalMines:s.totalMines,boardTimestamp:s.boardTimestamp,isRevealMode:s.isRevealMode,setTotalRows:function(e){return i({type:"SET_TOTAL_ROWS",payload:e})},setTotalCols:function(e){return i({type:"SET_TOTAL_COLS",payload:e})},setTotalMines:function(e){return i({type:"SET_TOTAL_MINES",payload:e})},setBoardTimestamp:function(e){return i({type:"SET_BOARD_TIMESTAMP",payload:e})},setIsRevealMode:function(e){return i({type:"SET_IS_REVEAL_MODE",payload:e})}}},e.children)},M=(t(18),function(){var e=Object(n.useContext)(c),a=Object(n.useState)(e.totalRows),t=Object(d.a)(a,2),r=t[0],s=t[1],i=Object(n.useState)(e.totalCols),o=Object(d.a)(i,2),m=o[0],u=o[1],p=Object(n.useState)(e.totalMines),f=Object(d.a)(p,2),b=f[0],g=f[1];return l.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.setTotalRows(parseInt(r)),e.setTotalCols(parseInt(m)),e.setTotalMines(parseInt(b)),e.setBoardTimestamp((new Date).getTime())}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8 col-centered mx-auto"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"fa fa-align-justify","aria-hidden":"true"}))),l.a.createElement("input",{id:"totalRowsInput",className:"form-control",type:"number",min:"1",max:"300",value:r,onChange:function(e){return s(e.target.value)},"aria-label":"Rows"}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"fa fa-align-justify fa-rotate-90","aria-hidden":"true"}))),l.a.createElement("input",{id:"totalColsInput",className:"form-control",type:"number",min:"1",max:"300",value:m,onChange:function(e){return u(e.target.value)},"aria-label":"Cols"}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"input-group"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"fa fa-bomb","aria-hidden":"true"}))),l.a.createElement("input",{id:"totalMinesInput",className:"form-control",type:"number",min:"1",max:r*m,value:b,onChange:function(e){return g(e.target.value)},"aria-label":"Mines"}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("button",{className:"btn btn-success",type:"submit"},"New Game"))))))}),T=function(){return l.a.createElement(O,null,l.a.createElement("div",{className:"minesweeperApp"},l.a.createElement(o,null),l.a.createElement("div",{className:"container mt-3"},l.a.createElement(M,null)),l.a.createElement("div",{className:"container jumbotron text-center mt-3 py-4 dark-background"},l.a.createElement("div",{className:"container game-board-container"},l.a.createElement(E,null)))))};s.a.render(l.a.createElement(T,null),document.getElementById("root"))},9:function(e,a,t){e.exports=t(19)}},[[9,1,2]]]);
//# sourceMappingURL=main.c3297800.chunk.js.map