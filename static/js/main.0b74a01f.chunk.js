(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{14:function(e,a,t){},15:function(e,a,t){},18:function(e,a,t){},19:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(7),o=t.n(r),s=Object(n.createContext)(),c=function(){var e=Object(n.useContext)(s),a=e.getIsRevealMode();return l.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0 ml-auto ".concat(a?"active":""),onClick:function(){e.setIsRevealMode(!a)}},l.a.createElement("i",{className:"fa fa-eye"})," Reveal All Cells")},i=function(){return l.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark"},l.a.createElement("a",{className:"navbar-brand",href:"/#"},l.a.createElement("i",{className:"fa fa-bomb"})," ReactJS Minesweeper"),l.a.createElement("button",{className:"navbar-toggler collapsed",type:"button","data-toggle":"collapse","data-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"navbar-collapse collapse",id:"navbarCollapse"},l.a.createElement(c,null)))},m=t(2),u=t(5),d=t(1),g=(t(14),{header:"Mazal Tov!",content:l.a.createElement("span",null,"You did it!",l.a.createElement("i",{className:"fa fa-trophy ml-1"})),type:"success",timeout:null}),f={header:"Oy Vey!",content:l.a.createElement("span",null,"It's a mine",l.a.createElement("i",{className:"fa fa-bomb ml-1"})),type:"danger",timeout:null},p={header:"Out Of Flags!",content:l.a.createElement("span",null,"Try to remove a flag before adding a new one",l.a.createElement("i",{className:"fa fa-flag ml-1"})),type:"secondary",timeout:5e3},b=function(e){var a=e.cellRow,t=e.cellCol,r=e.isMine,o=e.mineNeighbours,c=e.isRevealed,i=e.isFlagged,m=e.isLostTrigger,u=e.missedMark,d=e.clickHandler,g=e.touchHandler,f=Object(n.useContext)(s).getIsRevealMode(),p=null;return l.a.createElement("div",{className:"game-cell alert alert-".concat(m?"danger":u?"secondary":"primary"),style:{width:30,height:30}},l.a.createElement("span",null,r?l.a.createElement("i",{className:"fa fa-bomb fa-md"}):i?l.a.createElement("i",{className:"fa fa-times",style:{color:"#ffb000"}}):o>0?l.a.createElement(n.Fragment,null,o):null),l.a.createElement("button",{className:"btn btn-warning game-btn",onClick:function(e){return d(e,a,t)},onTouchStart:function(){return function(e,a){p=setTimeout((function(){g(!0,e,a)}),500)}(a,t)},onTouchEnd:function(){clearTimeout(p)},style:{opacity:c?0:f?.5:1,cursor:c?"auto":"pointer",display:"block"}},i?l.a.createElement("i",{className:"fa fa-flag"}):null))},v=(t(15),t(8)),E=function(e){var a=e.remainingFlags;return l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"bs-component"},l.a.createElement("div",{className:"alert"},l.a.createElement("h3",{className:"mr-1"},l.a.createElement("strong",null,a),l.a.createElement("i",{className:"fa fa-flag ml-1"})))))};E.prototype={remainingFlags:t.n(v).a.number};var N=E,T=function(e){var a=e.alert;return null!==a&&l.a.createElement("div",{className:"bs-component"},l.a.createElement("div",{className:"alert alert-".concat(a.type)},l.a.createElement("strong",null,a.header)," ",a.content))},O=function(){var e=Object(n.useContext)(s),a=e.getTotalRows(),t=e.getTotalCols(),r=e.getTotalMines(),o=e.getBoardTimestamp(),c=function(){return JSON.parse(localStorage.getItem("board"))},i=Object(n.useState)(c),v=Object(d.a)(i,2),E=v[0],O=v[1],M=Object(n.useState)("true"===localStorage.getItem("gameFreeze")||!1),S=Object(d.a)(M,2),y=S[0],h=S[1],I=Object(n.useState)(parseInt(localStorage.getItem("remainingFlags"))||r),R=Object(d.a)(I,2),j=R[0],C=R[1],w=Object(n.useState)(parseInt(localStorage.getItem("numberOfCorrectFlags"))||0),F=Object(d.a)(w,2),x=F[0],k=F[1],_=function(e){localStorage.setItem("gameFreeze",e),h(e)},L=function(e){localStorage.setItem("remainingFlags",e),C(e)},A=function(e){localStorage.setItem("numberOfCorrectFlags",e),k(e)},B=Object(n.useState)(null),D=Object(d.a)(B,2),H=D[0],J=D[1],P=Object(n.useCallback)((function(e){var a=e.header,t=e.content,n=e.type,l=e.timeout;J({header:a,content:t,type:n}),l>0&&setTimeout((function(){return J(null)}),l)}),[]);Object(n.useEffect)((function(){c()||(O(function(e,a,t){for(var n=[],l=0;l<e;l++){n.push([]);for(var r=0;r<a;r++)n[l].push({cellRow:l,cellCol:r,isRevealed:!1,isMine:!1,isFlagged:!1,isLostTrigger:!1,missedMark:!1,mineNeighbours:0})}for(var o=0,s=function(){var t=Math.floor(Math.random()*e),l=Math.floor(Math.random()*a),r=n[t][l];r.isMine||(n[t][l]=Object(m.a)({},r,{isMine:!0}),o++);var s=function(t,l){if(n[t][l].isMine)return-1;for(var r=0,o=-1;o<=1;o++){var s=t+o;if(!(s<0||s>=e))for(var c=-1;c<=1;c++){var i=l+c;i<0||i>=a||n[s][i].isMine&&r++}}return r};n.map((function(e,a){return e.map((function(e,t){return n[a][t]=Object(m.a)({},n[a][t],{mineNeighbours:s(a,t)})}))}))};o<t;)s();return n}(a,t,r)),L(r),A(0),_(!1),J(null),localStorage.removeItem("board"))}),[a,t,r,o]),Object(n.useEffect)((function(){localStorage.setItem("board",JSON.stringify(E))}),[E]),Object(n.useEffect)((function(){x===r&&(P(g),_(!0))}),[x,r,P]);var z=function(e,a,t){V(e.shiftKey,a,t)},V=function(e,a,t){var n=E[a][t];if(!y&&!n.isRevealed)if(e)W(a,t);else if(!n.isFlagged)return n.isMine?(P(f),n.isLostTrigger=!0,O(Object(u.a)(E).map((function(e){return e.map((function(e){return e.isMine&&!e.isFlagged||e.isFlagged&&!e.isMine?Object(m.a)({},e,{isRevealed:!0,missedMark:!0}):e}))}))),void _(!0)):void(n.isFlagged||G(a,t))},W=function(e,a){var t=Object(u.a)(E),n=t[e][a];if(n.isFlagged)L(j+1),n.isMine&&A(x-1);else{if(!(j>0))return void P(p);L(j-1),n.isMine&&A(x+1)}t[e][a].isFlagged=!t[e][a].isFlagged,O(t)},G=function(e,a){var t=Object(u.a)(E),n=t[e][a];n.isRevealed=!0,0===n.mineNeighbours&&(t=K(t,n)),O(t)},K=function(e,n){for(var l=n.cellRow,r=n.cellCol,o=-1;o<=1;o++){var s=l+o;if(!(s<0||s>=a))for(var c=-1;c<=1;c++){var i=r+c;if(!(i<0||i>=t)){var m=e[s][i];m.isRevealed||m.isMine||m.isFlagged||G(m.cellRow,m.cellCol)}}}return e};return l.a.createElement(n.Fragment,null,l.a.createElement(T,{alert:H}),l.a.createElement("div",{className:"container"},l.a.createElement(N,{remainingFlags:j})),l.a.createElement("div",{className:"game-board",style:{gridTemplateColumns:"repeat(".concat(t,", ").concat(30,"px)")}},E&&E.map((function(e,a){return e.map((function(e,t){return l.a.createElement("div",{key:"".concat(a,",").concat(t)},l.a.createElement(b,{cellRow:a,cellCol:t,isMine:e.isMine,mineNeighbours:e.mineNeighbours,isRevealed:e.isRevealed,isFlagged:e.isFlagged,isLostTrigger:e.isLostTrigger,missedMark:e.missedMark,clickHandler:z,touchHandler:V}))}))}))))},M=function(e,a){switch(a.type){case"SET_TOTAL_ROWS":return Object(m.a)({},e,{totalRows:a.payload});case"SET_TOTAL_COLS":return Object(m.a)({},e,{totalCols:a.payload});case"SET_TOTAL_MINES":return Object(m.a)({},e,{totalMines:a.payload});case"SET_BOARD_TIMESTAMP":return Object(m.a)({},e,{boardTimestamp:a.payload});case"SET_IS_REVEAL_MODE":return Object(m.a)({},e,{isRevealMode:a.payload});default:return}},S=function(e){var a={totalRows:9,totalCols:9,totalMines:10,boardTimestamp:(new Date).getTime(),isRevealMode:!1},t=Object(n.useReducer)(M,a),r=Object(d.a)(t,2),o=r[0],c=r[1];return l.a.createElement(s.Provider,{value:{getTotalRows:function(){var e=parseInt(localStorage.getItem("totalRows"));return e||o.totalRows},getTotalCols:function(){var e=parseInt(localStorage.getItem("totalCols"));return e||o.totalCols},getTotalMines:function(){var e=parseInt(localStorage.getItem("totalMines"));return e||o.totalMines},getBoardTimestamp:function(){var e=localStorage.getItem("boardTimestamp");return e||o.boardTimestamp},getIsRevealMode:function(){var e="true"===localStorage.getItem("isRevealMode");return e||o.isRevealMode},setTotalRows:function(e){localStorage.setItem("totalRows",e),c({type:"SET_TOTAL_ROWS",payload:e})},setTotalCols:function(e){localStorage.setItem("totalCols",e),c({type:"SET_TOTAL_COLS",payload:e})},setTotalMines:function(e){localStorage.setItem("totalMines",e),c({type:"SET_TOTAL_MINES",payload:e})},setBoardTimestamp:function(e){localStorage.setItem("boardTimestamp",e),c({type:"SET_BOARD_TIMESTAMP",payload:e})},setIsRevealMode:function(e){localStorage.setItem("isRevealMode",e),c({type:"SET_IS_REVEAL_MODE",payload:e})}}},e.children)},y=(t(18),function(){var e=Object(n.useContext)(s),a=Object(n.useState)(e.getTotalRows()),t=Object(d.a)(a,2),r=t[0],o=t[1],c=Object(n.useState)(e.getTotalCols()),i=Object(d.a)(c,2),m=i[0],u=i[1],g=Object(n.useState)(e.getTotalMines()),f=Object(d.a)(g,2),p=f[0],b=f[1];return l.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.setTotalRows(parseInt(r)),e.setTotalCols(parseInt(m)),e.setTotalMines(parseInt(p)),localStorage.removeItem("board"),e.setBoardTimestamp((new Date).getTime())}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8 col-centered mx-auto"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"input-group mb-1"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"fa fa-align-justify","aria-hidden":"true"}))),l.a.createElement("input",{id:"totalRowsInput",className:"form-control",type:"number",min:"1",max:"300",value:r,onChange:function(e){return o(e.target.value)},"aria-label":"Rows"}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"input-group mb-1"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"fa fa-align-justify fa-rotate-90","aria-hidden":"true"}))),l.a.createElement("input",{id:"totalColsInput",className:"form-control",type:"number",min:"1",max:"300",value:m,onChange:function(e){return u(e.target.value)},"aria-label":"Cols"}))),l.a.createElement("div",{className:"col-md-3"},l.a.createElement("div",{className:"input-group mb-1"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},l.a.createElement("i",{className:"fa fa-bomb","aria-hidden":"true"}))),l.a.createElement("input",{id:"totalMinesInput",className:"form-control",type:"number",min:"1",max:r*m,value:p,onChange:function(e){return b(e.target.value)},"aria-label":"Mines"}))),l.a.createElement("div",{className:"col-md-3 mb-1"},l.a.createElement("button",{className:"btn btn-success btn-block",type:"submit"},"New Game"))))))}),h=function(){return l.a.createElement("div",{className:"continer text-center mb-3"},l.a.createElement("h4",{className:"text-light"},"How To Play"),l.a.createElement("span",{className:"text-light mr-2 d-none d-sm-inline"},"Click to reveal a cell."),l.a.createElement("span",{className:"text-light mr-2 d-block d-sm-none"},"Touch to reveal a cell."),l.a.createElement("span",{className:"text-light mr-2 d-none d-sm-inline"},"Shift + Click to set a flag."),l.a.createElement("span",{className:"text-light mr-2 d-block d-sm-none"},"Touch Longer to set a flag."),l.a.createElement("span",{className:"text-light"},"Flag all mines for the win!"))},I=function(){return l.a.createElement(S,null,l.a.createElement("div",{className:"minesweeperApp"},l.a.createElement(i,null),l.a.createElement("div",{className:"container mt-3"},l.a.createElement(y,null)),l.a.createElement("div",{className:"container jumbotron text-center mt-3 py-4 dark-background"},l.a.createElement("div",{className:"container game-board-container"},l.a.createElement(O,null))),l.a.createElement(h,null)))};o.a.render(l.a.createElement(I,null),document.getElementById("root"))},9:function(e,a,t){e.exports=t(19)}},[[9,1,2]]]);
//# sourceMappingURL=main.0b74a01f.chunk.js.map